{
  "description": "sample WashingtonPost/wp_2_Normalized.json",
  "meta": {
    "full_size": 5110,
    "stripped_size": 2194,
    "features": [
      "$ref",
      "@siblingKeys",
      "additionalProperties",
      "enum",
      "items"
    ],
    "raw_features": [
      "$schema",
      "_boolSchema",
      "allOf:trivial",
      "definitions",
      "properties",
      "required",
      "type",
      "type:array",
      "type:boolean",
      "type:integer",
      "type:number",
      "type:object",
      "type:string"
    ]
  },
  "schema": {
    "$schema": "http://json-schema.org/draft-04/schema",
    "allOf": [
      {
        "properties": {
          "app_name": {
            "$ref": "#/definitions/traits_trait_app_name_json"
          },
          "auxiliaries": {
            "description": "A list of auxiliaries.",
            "items": {
              "$ref": "#/definitions/utils_auxiliary_json"
            },
            "type": "array"
          },
          "branch": {
            "description": "The name of the branch within Story API that this operation occurs on, if any",
            "type": "string"
          },
          "date": {
            "_format": "date-time",
            "description": "When the operation should be considered performed",
            "type": "string"
          },
          "id": {
            "description": "The id of the item being operated",
            "type": "string"
          },
          "keywords": {
            "description": "A list of keywords.",
            "items": {
              "$ref": "#/definitions/utils_keyword_json"
            },
            "type": "array"
          },
          "named_entities": {
            "description": "A list of named entities.",
            "items": {
              "$ref": "#/definitions/utils_named_entity_json"
            },
            "type": "array"
          },
          "operation": {
            "description": "The identifier of the operation being performed",
            "enum": [
              "update"
            ],
            "type": "string"
          },
          "organization_id": {
            "description": "The id of the organization",
            "type": "string"
          },
          "priority": {
            "$ref": "#/definitions/traits_trait_priority_json"
          },
          "published": {
            "description": "Identifies this item as published or not",
            "type": "boolean"
          },
          "topics": {
            "description": "A list of topics.",
            "items": {
              "$ref": "#/definitions/utils_topic_json"
            },
            "type": "array"
          },
          "type": {
            "description": "Identifies this as an ANS operation",
            "enum": [
              "clavis-operation"
            ],
            "type": "string"
          },
          "version": {
            "description": "The version of ANS this item is written in",
            "type": "string"
          }
        },
        "required": [
          "type",
          "operation",
          "id",
          "organization_id",
          "branch",
          "published"
        ]
      }
    ],
    "definitions": {
      "traits_trait_app_name_json": {
        "$schema": "http://json-schema.org/draft-04/schema#",
        "description": "The name of the application that generated an operation. This is used by downstream consumers in conjunction with 'priority' to make decisions about optimization.",
        "title": "Application Name",
        "type": "string"
      },
      "traits_trait_priority_json": {
        "$schema": "http://json-schema.org/draft-04/schema#",
        "description": "The priority identifier of this operation. This is used by downstream consumers to make decisions about optimization. The value 'standard' indicates an operation generated from a UI or live update. The value 'ingestion' indicates an operation generated by a migration script or background import.  Note that this represents a request for priority consideration from event-generating apps and downstream applications are not obligated to honor it.",
        "enum": [
          "standard",
          "ingestion"
        ],
        "title": "Priority",
        "type": "string"
      },
      "utils_auxiliary_json": {
        "$schema": "http://json-schema.org/draft-04/schema#",
        "additionalProperties": false,
        "description": "Models a auxiliary used in targeting a piece of content.",
        "properties": {
          "_id": {
            "description": "The unique identifier for this auxiliary.",
            "type": "string"
          },
          "name": {
            "description": "The general name for this auxiliary.",
            "type": "string"
          },
          "uid": {
            "description": "A short identifier for this auxiliary. Usually used in cases where a long form id cannot work.",
            "type": "string"
          }
        },
        "required": [
          "_id",
          "uid"
        ],
        "title": "Auxiliary",
        "type": "object"
      },
      "utils_keyword_json": {
        "$schema": "http://json-schema.org/draft-04/schema#",
        "additionalProperties": false,
        "description": "Models a keyword used in describing a piece of content.",
        "properties": {
          "frequency": {
            "description": "An optional count of the frequency of the keyword as it appears in the content it describes",
            "type": "integer"
          },
          "keyword": {
            "description": "The keyword used to describe a piece of content",
            "type": "string"
          },
          "score": {
            "description": "An arbitrary weighting to give the keyword",
            "type": "number"
          },
          "tag": {
            "description": "The Part of Speech tag for this keyword.",
            "type": "string"
          }
        },
        "required": [
          "keyword",
          "score"
        ],
        "title": "Keyword",
        "type": "object"
      },
      "utils_named_entity_json": {
        "$schema": "http://json-schema.org/draft-04/schema#",
        "additionalProperties": false,
        "description": "Models a named entity (i.e. name of a person, place, or organization) used in a piece of content.",
        "properties": {
          "_id": {
            "description": "A unique identifier for the concept of the named entity.",
            "type": "string"
          },
          "name": {
            "description": "The actual string of text that was identified as a named entity.",
            "type": "string"
          },
          "score": {
            "decription": "An optional relevancy for this named entitiy.",
            "type": "number"
          },
          "type": {
            "description": "A description of what the named entity is. E.g. 'organization', 'person', or 'location'.",
            "type": "string"
          }
        },
        "required": [
          "_id",
          "name",
          "type"
        ],
        "title": "Named Entity",
        "type": "object"
      },
      "utils_topic_json": {
        "$schema": "http://json-schema.org/draft-04/schema#",
        "additionalProperties": false,
        "description": "Models a topic used in describing a piece of content.",
        "properties": {
          "_id": {
            "description": "The unique identifier for this topic.",
            "type": "string"
          },
          "name": {
            "description": "The general name for this topic.",
            "type": "string"
          },
          "score": {
            "description": "An arbitrary weighting to give the topic",
            "type": "number"
          },
          "uid": {
            "description": "A short identifier for this topic. Usually used in cases where a long form id cannot work.",
            "type": "string"
          }
        },
        "required": [
          "_id",
          "score",
          "uid"
        ],
        "title": "Topic",
        "type": "object"
      }
    },
    "description": "An operation to add Clavis information to a story.",
    "type": "object"
  },
  "tests": [
    {
      "description": "llama 70b generated valid",
      "valid": true,
      "data": {
        "app_name": "Story API",
        "auxiliaries": [
          {
            "_id": "auxiliary-1",
            "name": "Auxiliary 1",
            "uid": "aux-1"
          },
          {
            "_id": "auxiliary-2",
            "name": "Auxiliary 2",
            "uid": "aux-2"
          }
        ],
        "branch": "main",
        "date": "2023-12-01T12:00:00Z",
        "id": "story-123",
        "keywords": [
          {
            "keyword": "Keyword 1",
            "score": 0.8,
            "tag": "Noun"
          },
          {
            "keyword": "Keyword 2",
            "score": 0.6,
            "tag": "Verb"
          }
        ],
        "named_entities": [
          {
            "_id": "entity-1",
            "name": "John Doe",
            "score": 0.9,
            "type": "Person"
          },
          {
            "_id": "entity-2",
            "name": "New York",
            "score": 0.7,
            "type": "Location"
          }
        ],
        "operation": "update",
        "organization_id": "org-123",
        "priority": "standard",
        "published": true,
        "topics": [
          {
            "_id": "topic-1",
            "name": "Topic 1",
            "score": 0.8,
            "uid": "top-1"
          },
          {
            "_id": "topic-2",
            "name": "Topic 2",
            "score": 0.6,
            "uid": "top-2"
          }
        ],
        "type": "clavis-operation",
        "version": "1.0"
      }
    },
    {
      "description": "llama 70b generated positive",
      "valid": true,
      "data": {
        "app_name": "my_app",
        "auxiliaries": [
          {
            "_id": "auxiliary_1",
            "name": "Auxiliary 1",
            "uid": "aux1"
          },
          {
            "_id": "auxiliary_2",
            "name": "Auxiliary 2",
            "uid": "aux2"
          }
        ],
        "branch": "main",
        "date": "2022-01-01T12:00:00Z",
        "id": "item_1",
        "keywords": [
          {
            "frequency": 5,
            "keyword": "keyword1",
            "score": 0.8,
            "tag": "NN"
          },
          {
            "frequency": 3,
            "keyword": "keyword2",
            "score": 0.6,
            "tag": "VB"
          }
        ],
        "named_entities": [
          {
            "_id": "entity_1",
            "name": "Entity 1",
            "score": 0.9,
            "type": "organization"
          },
          {
            "_id": "entity_2",
            "name": "Entity 2",
            "score": 0.7,
            "type": "person"
          }
        ],
        "operation": "update",
        "organization_id": "org_1",
        "priority": "standard",
        "published": true,
        "topics": [
          {
            "_id": "topic_1",
            "name": "Topic 1",
            "score": 0.85,
            "uid": "top1"
          },
          {
            "_id": "topic_2",
            "name": "Topic 2",
            "score": 0.65,
            "uid": "top2"
          }
        ],
        "type": "clavis-operation",
        "version": "1.0"
      }
    },
    {
      "description": "llama-70b generated negative; focus on allOf keyword",
      "valid": false,
      "rust_error": "\"uid\" is a required property",
      "python_error": "'custom' is not one of ['standard', 'ingestion']\n\nFailed validating 'enum' in schema['allOf'][0]['properties']['priority']:\n    {'$schema': 'http://json-schema.org/draft-04/schema#',\n     'description': 'The priority identifier of this operation. This is '\n                    'used by downstream consumers to make decisions about '\n                    \"optimization. The value 'standard' indicates an \"\n                    'operation generated from a UI or live update. The '\n                    \"value 'ingestion' indicates an operation generated by \"\n                    'a migration script or background import.  Note that '\n                    'this represents a request for priority consideration '\n                    'from event-generating apps and downstream '\n                    'applications are not obligated to honor it.',\n     'enum': ['standard', 'ingestion'],\n     'title': 'Priority',\n     'type': 'string'}\n\nOn instance['priority']:\n    'custom'",
      "data": {
        "app_name": "my_app",
        "auxiliaries": [
          {
            "_id": "auxiliary_1",
            "name": "Auxiliary 1",
            "uid": "aux1"
          },
          {
            "_id": "auxiliary_2",
            "name": "Auxiliary 2"
          }
        ],
        "branch": "main",
        "date": "2022-01-01T12:00:00Z",
        "id": "item_1",
        "keywords": [
          {
            "frequency": 5,
            "keyword": "keyword1",
            "score": 0.8,
            "tag": "NN"
          },
          {
            "frequency": 3,
            "keyword": "keyword2",
            "score": 0.6
          }
        ],
        "named_entities": [
          {
            "_id": "entity_1",
            "name": "Entity 1",
            "score": 0.9,
            "type": "organization"
          },
          {
            "_id": "entity_2",
            "name": "Entity 2",
            "score": 0.7,
            "type": "person"
          }
        ],
        "operation": "update",
        "organization_id": "org_1",
        "priority": "custom",
        "published": true,
        "topics": [
          {
            "_id": "topic_1",
            "name": "Topic 1",
            "score": 0.85,
            "uid": "top1"
          },
          {
            "_id": "topic_2",
            "name": "Topic 2",
            "score": 0.65,
            "uid": "top2"
          }
        ],
        "type": "clavis-operation",
        "version": "1.0"
      }
    },
    {
      "description": "llama-70b generated negative",
      "valid": false,
      "rust_error": "12345 is not of type \"string\"",
      "python_error": "'high' is not one of ['standard', 'ingestion']\n\nFailed validating 'enum' in schema['allOf'][0]['properties']['priority']:\n    {'$schema': 'http://json-schema.org/draft-04/schema#',\n     'description': 'The priority identifier of this operation. This is '\n                    'used by downstream consumers to make decisions about '\n                    \"optimization. The value 'standard' indicates an \"\n                    'operation generated from a UI or live update. The '\n                    \"value 'ingestion' indicates an operation generated by \"\n                    'a migration script or background import.  Note that '\n                    'this represents a request for priority consideration '\n                    'from event-generating apps and downstream '\n                    'applications are not obligated to honor it.',\n     'enum': ['standard', 'ingestion'],\n     'title': 'Priority',\n     'type': 'string'}\n\nOn instance['priority']:\n    'high'",
      "data": {
        "app_name": "my_app",
        "auxiliaries": [
          {
            "_id": "auxiliary_1",
            "name": "Auxiliary 1",
            "uid": 12345
          },
          {
            "_id": "auxiliary_2",
            "name": "Auxiliary 2",
            "uid": "aux2"
          }
        ],
        "branch": "main",
        "date": "2022-01-01T12:00:00Z",
        "id": "item_1",
        "keywords": [
          {
            "frequency": 5,
            "keyword": "keyword1",
            "score": 0.8
          },
          {
            "frequency": 3,
            "keyword": "keyword2",
            "score": 0.6,
            "tag": "VB"
          }
        ],
        "named_entities": [
          {
            "_id": "entity_1",
            "name": "Entity 1",
            "score": 0.9,
            "type": "organization"
          },
          {
            "_id": "entity_2",
            "name": "Entity 2",
            "score": 0.7,
            "type": "person"
          }
        ],
        "operation": "update",
        "organization_id": "org_1",
        "priority": "high",
        "published": true,
        "topics": [
          {
            "_id": "topic_1",
            "name": "Topic 1",
            "score": 0.85,
            "uid": "top1"
          },
          {
            "_id": "topic_2",
            "name": "Topic 2",
            "score": 0.65,
            "uid": "top2"
          }
        ],
        "type": "clavis-operation",
        "version": "1.0"
      }
    }
  ]
}